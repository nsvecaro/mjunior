import{_ as P}from"./DlAUqK2U.js";import{c as s,o,j as d,a,t as g,r as p,e as q,m as F,p as _,F as v,i as y,n as x,q as h}from"./BR-qz2ax.js";const W={class:"card"},T=["src","alt"],U={class:"card-content"},H={class:"product-name"},J={__name:"productcard",props:{product:{type:Object,required:!0}},setup(k){return(c,l)=>(o(),s("div",W,[k.product.image?(o(),s("img",{key:0,src:k.product.image,alt:k.product.name,class:"product-image",loading:"lazy"},null,8,T)):d("",!0),a("div",U,[a("h3",H,g(k.product.name),1)])]))}},m=P(J,[["__scopeId","data-v-1d9861fd"]]),K={id:"proizvodi"},Q={class:"container"},R={class:"sidebar"},X=["onClick"],Y={key:0},Z=["onClick"],ee={key:0},te={key:0,class:"sidebar-subcategory-description"},oe=["onClick"],re={key:0},se={class:"products-grid sidebar-products"},ue={key:1},ae={class:"products-grid sidebar-products"},le={key:0,class:"content"},ne={class:"page-title"},ce={key:0,class:"subcategory-description"},ie={key:1,class:"category-description"},de={key:2,class:"groups-container"},ve={class:"group-title"},ye={class:"products-grid"},ge={key:3,class:"products-grid"},pe={key:4,class:"products-grid"},_e={key:5,class:"empty-placeholder"},fe={__name:"proizvodi",setup(k){const c=p([]),l=p(null),i=p(null),w=p(null),b=p(null),f=p([]),j=p(!1),B=()=>{j.value=window.innerWidth<=600};q(async()=>{const e=await fetch("/proizvodi/proizvodi.json");c.value=await e.json(),B(),window.addEventListener("resize",B)}),F(()=>{window.removeEventListener("resize",B)});const G=_(()=>{const e=new Set;return c.value.forEach(r=>e.add(r.category)),Array.from(e)}),z=_(()=>{const e={};c.value.forEach(t=>{e[t.category]||(e[t.category]=new Set),t.subcategory&&e[t.category].add(t.subcategory)});const r={};for(const t in e)r[t]=Array.from(e[t]);return r}),$=_(()=>{if(!l.value)return null;const e=c.value.find(r=>r.category===l.value&&r.categoryDescription);return(e==null?void 0:e.categoryDescription)||null}),C=_(()=>{if(!l.value||!i.value)return null;const e=c.value.find(r=>r.category===l.value&&r.subcategory===i.value&&r.subcategoryDescription);return(e==null?void 0:e.subcategoryDescription)||null}),D=_(()=>!l.value||!i.value?[]:c.value.filter(e=>e.category===l.value&&e.subcategory===i.value)),N=_(()=>{if(l.value!=="Cijevi"||!i.value)return{};const e={};return D.value.forEach(r=>{const t=r.group;e[t]||(e[t]=[]),e[t].push(r)}),e}),O=_(()=>{if(!l.value)return[];const e=z.value[l.value];return e&&e.length>0?[]:c.value.filter(r=>r.category===l.value)}),A=e=>{w.value=w.value===e?null:e,l.value=e,b.value=null,f.value=[]},I=e=>{b.value=b.value===e?null:e,i.value=e,f.value=[]},L=e=>{f.value.includes(e)?f.value=[]:f.value=[e]},M=(e,r)=>{const t=new Set;return c.value.forEach(u=>{u.category===e&&u.subcategory===r&&u.group&&t.add(u.group)}),Array.from(t)},V=(e,r,t)=>c.value.filter(u=>u.category===e&&u.subcategory===r&&(u.group||"Ostalo")===t),E=(e,r)=>c.value.filter(t=>t.category===e&&t.subcategory===r&&!t.group);return(e,r)=>(o(),s("section",K,[a("div",Q,[a("aside",R,[a("ul",null,[(o(!0),s(v,null,y(G.value,t=>(o(),s("li",{key:t},[a("button",{onClick:u=>A(t),class:x({active:l.value===t})},g(t),11,X),w.value===t?(o(),s("ul",Y,[(o(!0),s(v,null,y(z.value[t],u=>(o(),s("li",{key:u},[a("button",{onClick:n=>I(u),class:x({"active-sub":i.value===u})},g(u),11,Z),j.value&&b.value===u?(o(),s("ul",ee,[C.value?(o(),s("li",te,[a("p",null,g(C.value),1)])):d("",!0),(o(!0),s(v,null,y(M(t,u),n=>(o(),s("li",{key:n},[a("button",{onClick:S=>L(n)},g(n),9,oe),f.value.includes(n)?(o(),s("div",re,[a("div",se,[(o(!0),s(v,null,y(V(t,u,n),S=>(o(),h(m,{key:S.id,product:S,class:"product-card"},null,8,["product"]))),128))])])):d("",!0)]))),128)),E(t,u).length>0?(o(),s("li",ue,[a("div",ae,[(o(!0),s(v,null,y(E(t,u),n=>(o(),h(m,{key:n.id,product:n,class:"product-card"},null,8,["product"]))),128))])])):d("",!0)])):d("",!0)]))),128))])):d("",!0)]))),128)),r[0]||(r[0]=a("li",null,[a("div",{class:"sidebar-label"},"Vijci i okovi")],-1)),r[1]||(r[1]=a("li",null,[a("div",{class:"sidebar-label"},"Boje i lakovi")],-1))])]),j.value?d("",!0):(o(),s("main",le,[a("h1",ne,g(i.value||l.value||"Proizvodi"),1),C.value?(o(),s("p",ce,g(C.value),1)):d("",!0),$.value?(o(),s("p",ie,g($.value),1)):d("",!0),l.value==="Cijevi"&&i.value?(o(),s("div",de,[(o(!0),s(v,null,y(N.value,(t,u)=>(o(),s("div",{key:u,class:"group"},[a("h3",ve,g(u),1),a("div",ye,[(o(!0),s(v,null,y(t,n=>(o(),h(m,{key:n.id,product:n,class:"product-card"},null,8,["product"]))),128))])]))),128))])):l.value&&i.value?(o(),s("div",ge,[(o(!0),s(v,null,y(D.value,t=>(o(),h(m,{key:t.id,product:t},null,8,["product"]))),128))])):l.value&&(!z.value[l.value]||z.value[l.value].length===0)?(o(),s("div",pe,[(o(!0),s(v,null,y(O.value,t=>(o(),h(m,{key:t.id,product:t},null,8,["product"]))),128))])):d("",!0),!l.value&&!i.value?(o(),s("div",_e,r[2]||(r[2]=[a("p",null,"Odaberi kategoriju i podkategoriju za prikaz proizvoda.",-1)]))):d("",!0),r[3]||(r[3]=a("div",{class:"empty-cta"},[a("p",{class:"cta-text"},"Trebaš pomoć pri odabiru proizvoda? Nazovi nas — odmah ćemo ti pomoći!"),a("a",{href:"tel:+38552500590",class:"cta-button"},"Nazovi nas")],-1))]))])]))}},me=P(fe,[["__scopeId","data-v-f1705eed"]]);export{me as default};
