import{computed as _,toValue as p,getCurrentInstance as B,onServerPrefetch as I,ref as K,shallowRef as N,toRef as O,nextTick as H,unref as F,defineComponent as b,h as z}from"vue";import{getIcon as R,loadIcon as M,Icon as G}from"@iconify/vue";import{getIconCSS as U}from"@iconify/utils/lib/css/icon";import{a as S,b as y,c as X,d as w,e as Y,u as J}from"../server.mjs";import{debounce as Q}from"/Users/noel/Desktop/ModingJuniorWeb/node_modules/perfect-debounce/dist/index.mjs";import"ofetch";import"#internal/nuxt/paths";import"/Users/noel/Desktop/ModingJuniorWeb/node_modules/hookable/dist/index.mjs";import"/Users/noel/Desktop/ModingJuniorWeb/node_modules/unctx/dist/index.mjs";import"/Users/noel/Desktop/ModingJuniorWeb/node_modules/h3/dist/index.mjs";import"vue-router";import"/Users/noel/Desktop/ModingJuniorWeb/node_modules/radix3/dist/index.mjs";import"/Users/noel/Desktop/ModingJuniorWeb/node_modules/defu/dist/defu.mjs";import"/Users/noel/Desktop/ModingJuniorWeb/node_modules/ufo/dist/index.mjs";import"/Users/noel/Desktop/ModingJuniorWeb/node_modules/klona/dist/index.mjs";import"vue/server-renderer";import"/Users/noel/Desktop/ModingJuniorWeb/node_modules/@unhead/vue/dist/index.mjs";const Z=e=>e==="defer"||e===!1;function x(...e){var u;const a=typeof e[e.length-1]=="string"?e.pop():void 0;A(e[0],e[1])&&e.unshift(a);let[r,s,t={}]=e;const n=_(()=>p(r));if(typeof n.value!="string")throw new TypeError("[nuxt] [useAsyncData] key must be a string.");if(typeof s!="function")throw new TypeError("[nuxt] [useAsyncData] handler must be a function.");const c=S();t.server??(t.server=!0),t.default??(t.default=ae),t.getCachedData??(t.getCachedData=V),t.lazy??(t.lazy=!1),t.immediate??(t.immediate=!0),t.deep??(t.deep=y.deep),t.dedupe??(t.dedupe="cancel"),t._functionName,c._asyncData[n.value];const i={cause:"initial",dedupe:t.dedupe};(u=c._asyncData[n.value])!=null&&u._init||(i.cachedData=t.getCachedData(n.value,c,{cause:"initial"}),c._asyncData[n.value]=ee(c,n.value,s,t,i.cachedData));const f=c._asyncData[n.value];f._deps++;const d=()=>c._asyncData[n.value].execute(i);if(t.server!==!1&&c.payload.serverRendered&&t.immediate){const o=d();B()?I(()=>o):c.hook("app:created",async()=>{await o})}const v={data:P(()=>{var o;return(o=c._asyncData[n.value])==null?void 0:o.data}),pending:P(()=>{var o;return(o=c._asyncData[n.value])==null?void 0:o.pending}),status:P(()=>{var o;return(o=c._asyncData[n.value])==null?void 0:o.status}),error:P(()=>{var o;return(o=c._asyncData[n.value])==null?void 0:o.error}),refresh:(...o)=>c._asyncData[n.value].execute(...o),execute:(...o)=>c._asyncData[n.value].execute(...o),clear:()=>T(c,n.value)},D=Promise.resolve(c._asyncDataPromises[n.value]).then(()=>v);return Object.assign(D,v),D}function P(e){return _({get(){var a;return(a=e())==null?void 0:a.value},set(a){const r=e();r&&(r.value=a)}})}function A(e,a){return!(typeof e=="string"||typeof e=="object"&&e!==null||typeof e=="function"&&typeof a=="function")}function T(e,a){a in e.payload.data&&(e.payload.data[a]=void 0),a in e.payload._errors&&(e.payload._errors[a]=y.errorValue),e._asyncData[a]&&(e._asyncData[a].data.value=void 0,e._asyncData[a].error.value=y.errorValue,e._asyncData[a].pending.value=!1,e._asyncData[a].status.value="idle"),a in e._asyncDataPromises&&(e._asyncDataPromises[a]&&(e._asyncDataPromises[a].cancelled=!0),e._asyncDataPromises[a]=void 0)}function k(e,a){const r={};for(const s of a)r[s]=e[s];return r}function ee(e,a,r,s,t){var v,D;(v=e.payload._errors)[a]??(v[a]=y.errorValue);const n=s.getCachedData!==V,c=!import.meta.prerender||!((D=e.ssrContext)!=null&&D._sharedPrerenderCache)?r:()=>{const u=e.ssrContext._sharedPrerenderCache.get(a);if(u)return u;const o=Promise.resolve().then(()=>e.runWithContext(()=>r(e)));return e.ssrContext._sharedPrerenderCache.set(a,o),o},i=s.deep?K:N,f=t!=null,d=e.hook("app:data:refresh",async u=>{(!u||u.includes(a))&&await l.execute({cause:"refresh:hook"})}),l={data:i(f?t:s.default()),pending:N(!f),error:O(e.payload._errors,a),status:N("idle"),execute:(...u)=>{const[o,W=void 0]=u,g=o&&W===void 0&&typeof o=="object"?o:{};if(e._asyncDataPromises[a]){if(Z(g.dedupe??s.dedupe))return e._asyncDataPromises[a];e._asyncDataPromises[a].cancelled=!0}if(g.cause==="initial"||e.isHydrating){const m="cachedData"in g?g.cachedData:s.getCachedData(a,e,{cause:g.cause??"refresh:manual"});if(m!=null)return e.payload.data[a]=l.data.value=m,l.error.value=y.errorValue,l.status.value="success",Promise.resolve(m)}l.pending.value=!0,l.status.value="pending";const C=new Promise((m,h)=>{try{m(c(e))}catch(j){h(j)}}).then(async m=>{if(C.cancelled)return e._asyncDataPromises[a];let h=m;s.transform&&(h=await s.transform(m)),s.pick&&(h=k(h,s.pick)),e.payload.data[a]=h,l.data.value=h,l.error.value=y.errorValue,l.status.value="success"}).catch(m=>{if(C.cancelled)return e._asyncDataPromises[a];l.error.value=X(m),l.data.value=F(s.default()),l.status.value="error"}).finally(()=>{C.cancelled||(l.pending.value=!1,delete e._asyncDataPromises[a])});return e._asyncDataPromises[a]=C,e._asyncDataPromises[a]},_execute:Q((...u)=>l.execute(...u),0,{leading:!0}),_default:s.default,_deps:0,_init:!0,_hash:void 0,_off:()=>{var u;d(),(u=e._asyncData[a])!=null&&u._init&&(e._asyncData[a]._init=!1),n||H(()=>{var o;(o=e._asyncData[a])!=null&&o._init||(T(e,a),l.execute=()=>Promise.resolve(),l.data.value=y.value)})}};return l}const ae=()=>y.value,V=(e,a,r)=>{if(a.isHydrating)return a.payload.data[e];if(r.cause!=="refresh:manual"&&r.cause!=="refresh:hook")return a.static.data[e]};async function q(e,a){if(!e)return null;const r=R(e);if(r)return r;let s;const t=M(e).catch(()=>(console.warn(`[Icon] failed to load icon \`${e}\``),null));return a>0?await Promise.race([t,new Promise(n=>{s=setTimeout(()=>{console.warn(`[Icon] loading icon \`${e}\` timed out after ${a}ms`),n()},a)})]).finally(()=>clearTimeout(s)):await t,R(e)}function E(e){const a=w().icon,r=(a.collections||[]).sort((s,t)=>t.length-s.length);return _(()=>{var c;const s=e(),t=s.startsWith(a.cssSelectorPrefix)?s.slice(a.cssSelectorPrefix.length):s,n=((c=a.aliases)==null?void 0:c[t])||t;if(!n.includes(":")){const i=r.find(f=>n.startsWith(f+"-"));return i?i+":"+n.slice(i.length+1):n}return n})}function L(e,a){if(e!==!1)return e===!0||e===null?a:e}const $="NUXT_ICONS_SERVER_CSS";function te(e){return e.replace(/([^\w-])/g,"\\$1")}const se=b({name:"NuxtIconCss",props:{name:{type:String,required:!0},customize:{type:[Function,Boolean,null],default:null,required:!1}},setup(e){const a=S(),r=w().icon,s=_(()=>e.name?r.cssSelectorPrefix+e.name:""),t=_(()=>"."+te(s.value));function n(c,i=!0){let f=t.value;r.cssWherePseudo&&(f=`:where(${f})`);const d=U(c,{iconSelector:f,format:"compressed",customise:L(e.customize,r.customize)});return r.cssLayer&&i?`@layer ${r.cssLayer} { ${d} }`:d}return I(async()=>{var c;{const i=Y().icon||{};if(!((c=i==null?void 0:i.serverKnownCssClasses)!=null&&c.includes(s.value))){const f=await q(e.name,r.fetchTimeout).catch(()=>null);if(!f)return null;let d=a.vueApp._context.provides[$];if(d||(d=a.vueApp._context.provides[$]=new Map,a.runWithContext(()=>{J({style:[()=>{let v=Array.from(d.values()).sort().join("");return r.cssLayer&&(v=`@layer ${r.cssLayer} {${v}}`),{innerHTML:v}}]},{tagPriority:"low"})})),e.name&&!d.has(e.name)){const l=n(f,!1);d.set(e.name,l)}return null}}}),()=>z("span",{class:["iconify",s.value]})}}),re=b({name:"NuxtIconSvg",props:{name:{type:String,required:!0},customize:{type:[Function,Boolean,null],default:null,required:!1}},setup(e,{slots:a}){S();const r=w().icon,s=E(()=>e.name),t="i-"+s.value;return s.value&&I(async()=>{await x(t,async()=>await q(s.value,r.fetchTimeout),{deep:!1})}),()=>z(G,{icon:s.value,ssr:!0,customise:L(e.customize,r.customize)},a)}}),Se=b({name:"NuxtIcon",props:{name:{type:String,required:!0},mode:{type:String,required:!1,default:null},size:{type:[Number,String],required:!1,default:null},customize:{type:[Function,Boolean,null],default:null,required:!1}},setup(e,{slots:a}){const r=S(),s=w().icon,t=E(()=>e.name),n=_(()=>{var i;return((i=r.vueApp)==null?void 0:i.component(t.value))||((e.mode||s.mode)==="svg"?re:se)}),c=_(()=>{const i=e.size||s.size;return i?{fontSize:Number.isNaN(+i)?i:i+"px"}:null});return()=>z(n.value,{...s.attrs,name:t.value,class:s.class,style:c.value,customize:e.customize},a)}});export{Se as default};
//# sourceMappingURL=index-CrtTLl9d.js.map
